"use strict";(function(n,m){var l=n.i18n.__,e=n.element.createElement,t=n.components,c=t.Button,b=t.IconButton,d=t.Icon,p=e;window.productTableBlockComponents||(window.productTableBlockComponents={});function v(e){for(var t=[],a=e.querySelectorAll("li"),n=0;n<a.length;n+=1)t.push(a[n].dataset.slug);return t}function f(e){e.currentTarget.classList.remove("selected"),e.currentTarget.classList.remove("select-attribute"),e.currentTarget.classList.remove("select-custom"),"att"===e.currentTarget.value?e.currentTarget.classList.add("select-attribute"):"cf"===e.currentTarget.value||"tax"===e.currentTarget.value?e.currentTarget.classList.add("select-custom"):e.currentTarget.classList.add("selected")}function g(e){""===e.currentTarget.value?e.currentTarget.classList.remove("selected"):e.currentTarget.classList.add("selected")}window.productTableBlockComponents.ProductTableColumns=function(e){var t=e.columns,r=e.saveColumns,a=[p("h3",{},l("Table Columns","wpt-block"))],o=n.element.createRef();a.push(function(e){var t=e.columnRef,a=e.columns,n=e.onChange,l=[];for(var c in a){var r=a[c].split(":"),o=[p("strong",{},m.columnLabels[r[0]].heading)];1<r.length&&o.push(p("em",{},r[1]));var s=p("li",{"data-slug":a[c],key:"table-column-"+c},[p(d,{icon:barn2_reorderIcon,alt:""}),p("span",{},o),p(b,{icon:barn2_deleteIcon,label:"Remove Column","data-index":c,onClick:function(e){n({newColumns:removeArrayIndex(a,e.currentTarget.dataset.index)})}})]);l.push(s)}return waitForReference(t,function(t){if(!t.classList.contains("ui-sortable")){var a=jQuery(t);a.sortable({update:function(){var e=v(t);a.sortable("cancel"),n({newColumns:e})}})}}),p("ul",{className:"barn2-wc-product-table-block__columns-selected",ref:t,"data-columns":a.join(",")},l)}({columnRef:o,columns:t,onChange:function(e){var t=e.newColumns;r(t)}})),a.push(p("p",{className:"empty-options"},l("(Using global options)","wpt-block")));var s=n.element.createRef(),u=n.element.createRef(),i=n.element.createRef();return a.push(p("select",{className:"barn2-wc-product-table-block__column-selector",onChange:f,ref:s},function(){var e=[p("option",{value:"",key:0},l("Add column","wpt-block"))];for(var t in m.columnLabels)e.push(p("option",{value:t,key:t},m.columnLabels[t].heading));return e}())),a.push(p("select",{className:"barn2-wc-product-table-block__attribute-selector",onChange:g,ref:u},function(){var e=[p("option",{value:"",key:0},l("Select global attribute","wpt-block"))];for(var t in m.columnLabels.att.values){var a=m.columnLabels.att.values[t];e.push(p("option",{value:a.attribute_name,key:a.attribute_id},a.attribute_label))}return e}())),a.push(p("input",{className:"barn2-wc-product-table-block__custom-input",onChange:g,ref:i})),a.push(p(c,{className:"components-button is-secondary barn2-wc-product-table-block__add-column-button",onClick:function(){var e,t,a,n,l,c=v(o.current);e={selection:s.current,attr:u.current,custom:i.current,columns:c},t=e.selection,a=e.attr,n=e.custom,l=e.columns,"att"===t.value?l.push(t.value+":"+a.value.replace(/^att\:/,"").trim()):"tax"===t.value||"cf"===t.value?l.push(t.value+":"+n.value.replace(/^(tax|cf)\:/,"").trim()):l.push(t.value),a.value="",a.classList.remove("selected"),n.value="",n.classList.remove("selected"),t.value="",t.classList.remove("selected"),t.classList.remove("select-attribute"),t.classList.remove("select-custom"),r(c=l)}},l("Add","wpt-block"))),p("div",{className:"barn2-wc-product-table-block__columns"},a)}})(window.wp,"undefined"!=typeof wcptbSettings?wcptbSettings:null);
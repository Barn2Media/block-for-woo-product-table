"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(function(C,L){var T=C.i18n.__,e=C.element.createElement,t=C.components,k=t.Button,S=t.IconButton,n=C.compose.withState,A=e;window.productTableBlockComponents||(window.productTableBlockComponents={});function _(e){for(var t=[],n=e.querySelectorAll("li"),a=0;a<n.length;a+=1)t.push(n[a].dataset.slug);return t}function N(e){e.currentTarget.classList.remove("selected"),e.currentTarget.classList.remove("select-attribute"),e.currentTarget.classList.remove("select-custom"),"att"===e.currentTarget.value?e.currentTarget.classList.add("select-attribute"):"cf"===e.currentTarget.value||"tax"===e.currentTarget.value?e.currentTarget.classList.add("select-custom"):e.currentTarget.classList.add("selected")}function O(e){""===e.currentTarget.value?e.currentTarget.classList.remove("selected"):e.currentTarget.classList.add("selected")}function x(e,t){var n=[];for(var a in e)a!==t&&n.push(e[a]);return n}function H(e){var t,n,a=e.indexOf(":");return t=-1!==a?e.substring(0,a):e,A("span",{className:"col-"+t},(n=t,L.columnLabels[n]?L.columnLabels[n].heading:n))}var I=A("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24"},A("path",{d:"M12,2C6.486,2,2,6.486,2,12s4.486,10,10,10s10-4.486,10-10S17.514,2,12,2z M16.207,14.793l-1.414,1.414L12,13.414 l-2.793,2.793l-1.414-1.414L10.586,12L7.793,9.207l1.414-1.414L12,10.586l2.793-2.793l1.414,1.414L13.414,12L16.207,14.793z"}));window.productTableBlockComponents.ProductTableColumns=n({columnsHaveChanged:!1,modalOpened:!1,newColumns:null})(function(e){var t=e.columnsHaveChanged,n=e.modalOpened,o=e.newColumns,a=e.columns,r=e.onChange,l=e.setState,u=[],c=!1,s="product-table-column-preview wc-product-table woocommerce dataTable";if(o||(o=[],c=!0),a&&0!==a.length){var i,m=_createForOfIteratorHelper(a);try{for(m.s();!(i=m.n()).done;){f=i.value;u.push(H(f)),c&&o.push(f)}}catch(e){m.e(e)}finally{m.f()}}else{s+=" default";var d,v=_createForOfIteratorHelper(L.defaultValues.columns);try{for(v.s();!(d=v.n()).done;){var f=d.value;u.push(H(f))}}catch(e){v.e(e)}finally{v.f()}}var p="customize-column-modal";t&&(p+=" changed"),n&&(p+=" opened");var b=C.element.createRef(),h=C.element.createRef(),g=C.element.createRef(),w=C.element.createRef(),y=A("div",{className:p},[A("h3",{},T("Modify Table Columns","wpt-block")),A(k,{className:"save-table-columns-button",onClick:function(){r&&r(o),l({columnsHaveChanged:!1,modalOpened:!1})}},T("Save","wpt-block")),function(e){var t=e.ref,n=e.columns,a=e.onChange,r=[];for(var o in n){var l=A("li",{"data-slug":n[o],key:"table-column-"+o},[n[o],A(S,{icon:I,label:"Remove Column","data-index":o,onClick:function(e){a(x(n,e.currentTarget.dataset.index))}})]);r.push(l)}return A("ul",{className:"table-column-options",ref:t,"data-columns":n.join(",")},r)}({ref:b,columns:o,onChange:function(e){l({columnsHaveChanged:!0,newColumns:e})}}),A("p",{className:"empty-options"},T("(Using global options)","wpt-block")),A("select",{className:"new-table-column-selection",onChange:N,ref:h},function(){var e=[A("option",{value:"",key:0},T("(Select a column to add)","wpt-block"))];for(var t in L.columnLabels)e.push(A("option",{value:t,key:t},L.columnLabels[t].heading));return e}()),A("select",{className:"new-table-column-attribute-selection",onChange:O,ref:g},function(){var e=[A("option",{value:"",key:0},T("(Select an attribute)","wpt-block"))];for(var t in L.columnLabels.att.values){var n=L.columnLabels.att.values[t];e.push(A("option",{value:n.attribute_name,key:n.attribute_id},n.attribute_label))}return e}()),A("input",{className:"new-table-column-custom-entry",onChange:O,ref:w}),A(k,{className:"add-table-column-button",onClick:function(){var e,t,n,a,r;o=_(b.current),e={selection:h.current,attr:g.current,custom:w.current,columns:o},t=e.selection,n=e.attr,a=e.custom,r=e.columns,"att"===t.value?r.push(t.value+":"+n.value):"tax"===t.value||"cf"===t.value?r.push(t.value+":"+a.value):r.push(t.value),n.value="",n.classList.remove("selected"),a.value="",a.classList.remove("selected"),t.value="",t.classList.remove("selected"),t.classList.remove("select-attribute"),t.classList.remove("select-custom"),l({columnsHaveChanged:!0,newColumns:o=r})}},T("Add","wpt-block"))]);return u.push(A(k,{className:"customize-columns","aria-expanded":n?"true":"false",onClick:function(){l({modalOpened:!n})}},T("Customize Columns","wpt-block"))),u.push(y),B(b,function(t){if(!t.classList.contains("ui-sortable")){var n=jQuery(t);n.sortable({update:function(){var e=_(t);n.sortable("cancel"),l({columnsHaveChanged:!0,newColumns:e})}})}}),A("div",{className:s},u)});var B=function e(t,n){t.current?n(t.current):window.setTimeout(e,100,t,n)}})(window.wp,wcptbSettings);
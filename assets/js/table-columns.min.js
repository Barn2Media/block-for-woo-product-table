"use strict";(function(n,m){var l=n.i18n.__,e=n.element.createElement,t=n.components,c=t.Button,b=t.IconButton,d=t.Icon,v=e;window.productTableBlockComponents||(window.productTableBlockComponents={});function p(e){for(var t=[],a=e.querySelectorAll("li"),n=0;n<a.length;n+=1)t.push(a[n].dataset.slug);return t}function f(e){e.currentTarget.classList.remove("selected"),e.currentTarget.classList.remove("select-attribute"),e.currentTarget.classList.remove("select-custom"),"att"===e.currentTarget.value?e.currentTarget.classList.add("select-attribute"):"cf"===e.currentTarget.value||"tax"===e.currentTarget.value?e.currentTarget.classList.add("select-custom"):e.currentTarget.classList.add("selected")}function g(e){""===e.currentTarget.value?e.currentTarget.classList.remove("selected"):e.currentTarget.classList.add("selected")}window.productTableBlockComponents.ProductTableColumns=function(e){var t=e.columns,o=e.saveColumns,a=[v("h3",{},l("Table Columns","wpt-block"))],r=n.element.createRef();a.push(function(e){var t=e.columnRef,a=e.columns,n=e.onChange,l=[];for(var c in a){var o=a[c].split(":"),r=[v("strong",{},m.columnLabels[o[0]].heading)];1<o.length&&r.push(v("em",{},o[1]));var s=v("li",{"data-slug":a[c],key:"table-column-"+c},[v(d,{icon:barn2_reorderIcon,alt:""}),v("span",{},r),v(b,{icon:barn2_deleteIcon,label:"Remove Column","data-index":c,onClick:function(e){n({newColumns:removeArrayIndex(a,e.currentTarget.dataset.index)})}})]);l.push(s)}return waitForReference(t,function(t){if(!t.classList.contains("ui-sortable")){var a=jQuery(t);a.sortable({update:function(){var e=p(t);a.sortable("cancel"),n({newColumns:e})}})}}),v("ul",{className:"barn2-wc-product-table-block__columns-selected",ref:t,"data-columns":a.join(",")},l)}({columnRef:r,columns:t,onChange:function(e){var t=e.newColumns;o(t)}})),a.push(v("p",{className:"empty-options"},l("(Using global options)","wpt-block")));var s=n.element.createRef(),u=n.element.createRef(),i=n.element.createRef();return a.push(v("select",{className:"barn2-wc-product-table-block__column-selector",onChange:f,ref:s},function(){var e=[v("option",{value:"",key:0},l("(Select a table column to add)","wpt-block"))];for(var t in m.columnLabels)e.push(v("option",{value:t,key:t},m.columnLabels[t].heading));return e}())),a.push(v("select",{className:"barn2-wc-product-table-block__attribute-selector",onChange:g,ref:u},function(){var e=[v("option",{value:"",key:0},l("(Select an attribute)","wpt-block"))];for(var t in m.columnLabels.att.values){var a=m.columnLabels.att.values[t];e.push(v("option",{value:a.attribute_name,key:a.attribute_id},a.attribute_label))}return e}())),a.push(v("input",{className:"barn2-wc-product-table-block__custom-input",onChange:g,ref:i})),a.push(v(c,{className:"components-button is-secondary barn2-wc-product-table-block__add-column-button",onClick:function(){var e,t,a,n,l,c=p(r.current);e={selection:s.current,attr:u.current,custom:i.current,columns:c},t=e.selection,a=e.attr,n=e.custom,l=e.columns,"att"===t.value?l.push(t.value+":"+a.value):"tax"===t.value||"cf"===t.value?l.push(t.value+":"+n.value):l.push(t.value),a.value="",a.classList.remove("selected"),n.value="",n.classList.remove("selected"),t.value="",t.classList.remove("selected"),t.classList.remove("select-attribute"),t.classList.remove("select-custom"),o(c=l)}},l("Add","wpt-block"))),v("div",{className:"barn2-wc-product-table-block__columns"},a)}})(window.wp,"undefined"!=typeof wcptbSettings?wcptbSettings:null);